+++
title="深度学习做OCR"
date=2020-11-23
draft=true

[taxonomies]
categories=["Programming"]
tags=["OCR", "Deep Learning", "Machine Learning"]
+++

开箱即用的 OCR 项目有：

- https://github.com/YCG09/chinese_ocr
- https://github.com/ouyanghuiyu/chineseocr_lite
-

但是如果使用预训练的模型，效果可能要打一些折扣。识别效果可能还比不上`Tesseract`。
如果想提高识别的效果，就必须训练自己的模型。

要达到比较好的效果，在训练时的样本就要尽可能的模拟到真实场景。

## 样本生成

1. 随机生成不同长度的训练样本
2. 随机生成不同字体的训练样本
3. 随机生成不同粗细的训练样本，这一步也可以在训练时通过对图片做腐蚀或膨胀操作得到
4. 随机生成各种不同字符间距的样本
5. 生成的样本可以是干净的样本，可以在训练时对图片进行各种变换操作

## 图片增广

随机应用各种图片增广效果和它们的组合。

常用的变换有：

- 模糊
- 增加噪声
- 形态学操作，腐蚀或膨胀
- 亮度变换
- 对比度变换
- 色调变换
- 饱和度变换
- 透视变换
- 随机扰动

除了以上常见的变换，还可以做以下变换：

- 颜色或亮度渐变效果

  生成一个渐变颜色的图像，然后两个图像做融合操作

- 随机干扰线

  可以随机画几条干扰线，增加识别的抗干扰性。
  用随机数确定线条的数量。
  用随机数确定线条的粗细。
  用随机数确定线条的颜色。
  用随机数确定线条的两个端点，然后划线。

- 随机拉伸和压缩

  可以随机在横向和纵向对图像进行一定比例的拉伸和压缩，模拟形变效果。

- 随机 Padding

  随机在上下左右四个方向 Padding，增加稳定性。

- 随机裁剪

  随机在上下左右四个方向进行不同程度的裁剪，增加稳定性。

> 需要注意的是有些操作是互斥的，也需要注意应用的顺序。比如说模糊操作和干扰线，真实情况应该是干扰线和文字一起模糊掉，需要先画干扰线，再应用模糊效果。
