<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh">
    <title>Lei&#x27;s Blog - linux</title>
    <link rel="self" type="application/atom+xml" href="https://blog.dotone.top/tags/linux/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://blog.dotone.top"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2020-09-16T00:00:00+00:00</updated>
    <id>https://blog.dotone.top/tags/linux/atom.xml</id>
    <entry xml:lang="zh">
        <title>Unsuccessful try of mergerfs on Alpine Linux</title>
        <published>2020-09-16T00:00:00+00:00</published>
        <updated>2020-09-16T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://blog.dotone.top/blog/it/unsuccessful-try-mergerfs-on-alpine-linux/"/>
        <id>https://blog.dotone.top/blog/it/unsuccessful-try-mergerfs-on-alpine-linux/</id>
        
        <content type="html" xml:base="https://blog.dotone.top/blog/it/unsuccessful-try-mergerfs-on-alpine-linux/">&lt;p&gt;There is no pre-build packages for Alpine Linux.  So I build it by myself.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;install-fuse&quot;&gt;Install &lt;code&gt;fuse&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; apk add fuse3
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;build-install-mergerfs&quot;&gt;Build&amp;amp;install &lt;code&gt;mergerfs&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; clone https:&#x2F;&#x2F;github.com&#x2F;trapexit&#x2F;mergerfs.git
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span&gt; mergerfs
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span&gt; checkout tags&#x2F;2.30.0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -b&lt;&#x2F;span&gt;&lt;span&gt; v2.30.0
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;make
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; make install
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;mergerfs&lt;&#x2F;code&gt; was installed to &lt;code&gt;&#x2F;usr&#x2F;local&#x2F;bin&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;load-fuse-mod-on-boot&quot;&gt;Load &lt;code&gt;fuse&lt;&#x2F;code&gt; mod on boot&lt;&#x2F;h2&gt;
&lt;p&gt;Add &lt;code&gt;fuse&lt;&#x2F;code&gt; to &lt;code&gt;&#x2F;boot&#x2F;extlinux.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;conf&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-conf &quot;&gt;&lt;code class=&quot;language-conf&quot; data-lang=&quot;conf&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Generated by update-extlinux 6.04_pre1-r6
&lt;&#x2F;span&gt;&lt;span&gt;DEFAULT menu.c32
&lt;&#x2F;span&gt;&lt;span&gt;PROMPT &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;MENU TITLE Alpine&#x2F;Linux Boot Menu
&lt;&#x2F;span&gt;&lt;span&gt;MENU HIDDEN
&lt;&#x2F;span&gt;&lt;span&gt;MENU AUTOBOOT Alpine will be booted automatically in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# seconds.
&lt;&#x2F;span&gt;&lt;span&gt;TIMEOUT &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;10
&lt;&#x2F;span&gt;&lt;span&gt;LABEL lts
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MENU &lt;&#x2F;span&gt;&lt;span&gt;DEFAULT
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;MENU &lt;&#x2F;span&gt;&lt;span&gt;LABEL Linux lts
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;LINUX &lt;&#x2F;span&gt;&lt;span&gt;vmlinuz-lts
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;INITRD &lt;&#x2F;span&gt;&lt;span&gt;initramfs-lts
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;APPEND &lt;&#x2F;span&gt;&lt;span&gt;root=UUID=d0f32707-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;6030&lt;&#x2F;span&gt;&lt;span&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;473e&lt;&#x2F;span&gt;&lt;span&gt;-a236-823b90dd2e72  modules=sd-mod,usb-storage,ext4,xfs,fuse nomodeset quiet rootfstype=ext4
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;MENU SEPARATOR
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;mount-mergerfs-on-boot&quot;&gt;Mount &lt;code&gt;mergerfs&lt;&#x2F;code&gt; on boot&lt;&#x2F;h2&gt;
&lt;p&gt;Modify &lt;code&gt;&#x2F;etc&#x2F;fstab&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;conf&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-conf &quot;&gt;&lt;code class=&quot;language-conf&quot; data-lang=&quot;conf&quot;&gt;&lt;span&gt;UUID=d0f32707-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;6030&lt;&#x2F;span&gt;&lt;span&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;473e&lt;&#x2F;span&gt;&lt;span&gt;-a236-823b90dd2e72	&#x2F;	ext4	rw,relatime &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 1
&lt;&#x2F;span&gt;&lt;span&gt;UUID=7794c691-bc03-4c26-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;898f&lt;&#x2F;span&gt;&lt;span&gt;-58231b93e780	&#x2F;boot	ext4	rw,relatime &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 2
&lt;&#x2F;span&gt;&lt;span&gt;UUID=b5ebf3c5-39b0-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;41ec&lt;&#x2F;span&gt;&lt;span&gt;-ae68-7f08e99b7688	swap	swap	defaults	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 0
&lt;&#x2F;span&gt;&lt;span&gt;UUID=13534eb9-ae36-4af5-af78-f21b1ef34213       &#x2F;media&#x2F;disk1 xfs defaults &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 0
&lt;&#x2F;span&gt;&lt;span&gt;UUID=4a10fa24-aaea-42f1-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;88ae&lt;&#x2F;span&gt;&lt;span&gt;-7d32c0bcab3d       &#x2F;media&#x2F;disk2 xfs defaults &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 0
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;media&#x2F;disk1:&#x2F;media&#x2F;disk2                       &#x2F;media&#x2F;vdisk fuse.mergerfs defaults,allow_other,noforget,use_ino,inodecalc=path-hash,minfreespace=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;4G&lt;&#x2F;span&gt;&lt;span&gt;,ignorepponrename=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true&lt;&#x2F;span&gt;&lt;span&gt;,cache.files=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;off&lt;&#x2F;span&gt;&lt;span&gt;,category.search=epff,category.create=mfs,func.getattr=newest,posix_acl=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;true 0 0
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;dev&#x2F;cdrom	&#x2F;media&#x2F;cdrom	iso9660	noauto,ro &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 0
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;dev&#x2F;usbdisk	&#x2F;media&#x2F;usb	vfat	noauto	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0 0
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Mount &lt;code&gt;mergerfs&lt;&#x2F;code&gt; without reboot:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; mount &#x2F;media&#x2F;vdisk
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;setup-samba-share&quot;&gt;Setup Samba share&lt;&#x2F;h2&gt;
&lt;p&gt;Append below to &lt;code&gt;&#x2F;etc&#x2F;samba&#x2F;smb.conf&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;conf&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-conf &quot;&gt;&lt;code class=&quot;language-conf&quot; data-lang=&quot;conf&quot;&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[shares]
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;comment &lt;&#x2F;span&gt;&lt;span&gt;= All disks
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path &lt;&#x2F;span&gt;&lt;span&gt;= &#x2F;media&#x2F;vdisk&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;public &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;no
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;writable &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;printable &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;no
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;browsable &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes     
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;valid &lt;&#x2F;span&gt;&lt;span&gt;users = lei
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;admin &lt;&#x2F;span&gt;&lt;span&gt;users = lei
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;follow &lt;&#x2F;span&gt;&lt;span&gt;symlinks = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;wide &lt;&#x2F;span&gt;&lt;span&gt;links = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;map &lt;&#x2F;span&gt;&lt;span&gt;archive = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;no
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;map &lt;&#x2F;span&gt;&lt;span&gt;system = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes
&lt;&#x2F;span&gt;&lt;span&gt;   &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;map &lt;&#x2F;span&gt;&lt;span&gt;hidden = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;yes
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Restart &lt;code&gt;samba&lt;&#x2F;code&gt; service to make changes take effect:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; rc-service samba restart
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;problems&quot;&gt;Problems&lt;&#x2F;h2&gt;
&lt;p&gt;It&#x27;s OK to visit samba share from other computers after these setups. But there&#x27;s a problem the file system reports &lt;code&gt;no space left on device&lt;&#x2F;code&gt; when you create a file or directory under &lt;code&gt;&#x2F;media&#x2F;vdisk&#x2F;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I found that you can modify and save an existing file successfully.
At first, I thought it&#x27;s a problem of samba. 
Then I tried different configurations for samba, such as &lt;code&gt;create mask&lt;&#x2F;code&gt;, &lt;code&gt;directory mask&lt;&#x2F;code&gt;, &lt;code&gt;force create mode&lt;&#x2F;code&gt;, &lt;code&gt;force directory mode&lt;&#x2F;code&gt;, and &lt;code&gt;security mask&lt;&#x2F;code&gt; etc.
Also tried many combinations of &lt;code&gt;mergerfs&lt;&#x2F;code&gt; options.&lt;&#x2F;p&gt;
&lt;p&gt;I thought it might be permission issue. Then I changed the permissions of disks.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; chown&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -R&lt;&#x2F;span&gt;&lt;span&gt; lei &#x2F;media&#x2F;disk1&#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span&gt; chown&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -R&lt;&#x2F;span&gt;&lt;span&gt; lei &#x2F;media&#x2F;disk2&#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;chmod&lt;&#x2F;span&gt;&lt;span&gt; 777 &#x2F;media&#x2F;disk1&#x2F;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;chmod&lt;&#x2F;span&gt;&lt;span&gt; 777 &#x2F;media&#x2F;disk1&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Tried different &lt;code&gt;mergerfs&lt;&#x2F;code&gt; versions, but no luck.&lt;&#x2F;p&gt;
&lt;p&gt;I even tried with different fs type, from &lt;code&gt;ext4&lt;&#x2F;code&gt;to &lt;code&gt;xfs&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Then I tried to create a file with &lt;code&gt;touch &#x2F;media&#x2F;vdisk&#x2F;temp.txt&lt;&#x2F;code&gt; or &lt;code&gt;mkdir &#x2F;media&#x2F;vdisk&#x2F;temp&lt;&#x2F;code&gt;, and got &lt;code&gt;no space left on device&lt;&#x2F;code&gt; error. Obviously it&#x27;s something wrong with &lt;code&gt;mergerfs&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="zh">
        <title>Change default shell for Linux</title>
        <published>2020-07-15T00:00:00+00:00</published>
        <updated>2020-07-15T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://blog.dotone.top/notes/change-default-shell/"/>
        <id>https://blog.dotone.top/notes/change-default-shell/</id>
        
        <content type="html" xml:base="https://blog.dotone.top/notes/change-default-shell/">&lt;h2 id=&quot;cha-kan-zhi-chi-de-shell&quot;&gt;查看支持的shell&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cat &#x2F;etc&#x2F;shells
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;xiu-gai-shell&quot;&gt;修改shell&lt;&#x2F;h2&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;cat &#x2F;etc&#x2F;passwd
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;输出类似于：&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;ash
&lt;&#x2F;span&gt;&lt;span&gt;bin:x:1:1:bin:&#x2F;bin:&#x2F;sbin&#x2F;nologin
&lt;&#x2F;span&gt;&lt;span&gt;daemon:x:2:2:daemon:&#x2F;sbin:&#x2F;sbin&#x2F;nologin
&lt;&#x2F;span&gt;&lt;span&gt;adm:x:3:4:adm:&#x2F;var&#x2F;adm:&#x2F;sbin&#x2F;nologin
&lt;&#x2F;span&gt;&lt;span&gt;......
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;修改&lt;code&gt;root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;ash&lt;&#x2F;code&gt;最后一部分的&lt;code&gt;&#x2F;bin&#x2F;ash&lt;&#x2F;code&gt;为shell的路径，然后保存就可以了。&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="zh">
        <title>parted auto-align</title>
        <published>2020-07-13T00:00:00+00:00</published>
        <updated>2020-07-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://blog.dotone.top/notes/parted-auto-align/"/>
        <id>https://blog.dotone.top/notes/parted-auto-align/</id>
        
        <content type="html" xml:base="https://blog.dotone.top/notes/parted-auto-align/">&lt;p&gt;parted&lt;&#x2F;p&gt;
&lt;p&gt;自动对齐&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;mkpart&lt;&#x2F;span&gt;&lt;span&gt; primary ext4 0% 100%
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
        
    </entry>
    <entry xml:lang="zh">
        <title>linux内核文件系统监视</title>
        <published>2010-08-24T00:00:00+00:00</published>
        <updated>2010-08-24T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://blog.dotone.top/blog/it/linux-file-watch/"/>
        <id>https://blog.dotone.top/blog/it/linux-file-watch/</id>
        
        <content type="html" xml:base="https://blog.dotone.top/blog/it/linux-file-watch/">&lt;p&gt;pyinotify是一个基于linux内核的文件系统监视的python模块。&lt;&#x2F;p&gt;
&lt;p&gt;在ProcessEvent类的子类中定义对文件系统改变的事件的处理，形式为process+事件名称，如定义process_IN_CREATE方法来处理IN_CREATE事件，如果要处理所有的事件，则需要定义process_default方法。&lt;&#x2F;p&gt;
&lt;p&gt;下面这个程序监视文件或文件夹的创建或删除操作。
filewatcher.py&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;py&quot; style=&quot;background-color:#2b303b;color:#c0c5ce;&quot; class=&quot;language-py &quot;&gt;&lt;code class=&quot;language-py&quot; data-lang=&quot;py&quot;&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#!&#x2F;usr&#x2F;bin&#x2F;env python
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;#encoding=utf-8
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;os
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;sys
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;pyinotify &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;WatchManager,Notifier,ProcessEvent
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ebcb8b;&quot;&gt;EventHandler&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;ProcessEvent&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eff1f5;&quot;&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;__init__&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.path = path
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file = file
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;process_IN_CREATE&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;event&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        path = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.path
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;event.name:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % os.path.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(event.path,event.name)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % event.path
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; created&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;process_IN_DELETE&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;event&lt;&#x2F;span&gt;&lt;span&gt;):
&lt;&#x2F;span&gt;&lt;span&gt;        path = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.path
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;event.name:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % os.path.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;join&lt;&#x2F;span&gt;&lt;span&gt;(event.path,event.name)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;else&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file = &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % event.path
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;%s&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt; deleted&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39; % &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;self&lt;&#x2F;span&gt;&lt;span&gt;.file
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;def &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fa1b3;&quot;&gt;monitor&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;path&lt;&#x2F;span&gt;&lt;span&gt;=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;&#x2F;home&#x2F;daysky&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;):
&lt;&#x2F;span&gt;&lt;span&gt;    handler = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;EventHandler&lt;&#x2F;span&gt;&lt;span&gt;(path)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span&gt;pyinotify &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;IN_CREATE&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;IN_DELETE
&lt;&#x2F;span&gt;&lt;span&gt;    mask = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;IN_CREATE &lt;&#x2F;span&gt;&lt;span&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;IN_DELETE
&lt;&#x2F;span&gt;&lt;span&gt;    wm = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;WatchManager&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;    notifier = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Notifier&lt;&#x2F;span&gt;&lt;span&gt;(wm,handler)
&lt;&#x2F;span&gt;&lt;span&gt;    wm.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;add_watch&lt;&#x2F;span&gt;&lt;span&gt;(path,mask)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;monitor starting...&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;while &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;True&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;try&lt;&#x2F;span&gt;&lt;span&gt;:
&lt;&#x2F;span&gt;&lt;span&gt;            notifier.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;process_events&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;notifier.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;check_events&lt;&#x2F;span&gt;&lt;span&gt;():              
&lt;&#x2F;span&gt;&lt;span&gt;                notifier.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;read_events&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;except &lt;&#x2F;span&gt;&lt;span&gt;KeyboardInterrupt:
&lt;&#x2F;span&gt;&lt;span&gt;            notifier.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;stop&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;print &lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;monitor stopped.&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;break
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;__name__ == &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;__main__&lt;&#x2F;span&gt;&lt;span&gt;&amp;#39;:
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;monitor&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;启动监视器&lt;code&gt;python filewatcher.py&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;在命令行中执行以下操作：&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;mkdir test
&lt;&#x2F;span&gt;&lt;span&gt;rmdir test
&lt;&#x2F;span&gt;&lt;span&gt;touch test.txt
&lt;&#x2F;span&gt;&lt;span&gt;rm test.txt
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;可以看到执行结果如下：&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#c0c5ce;&quot;&gt;&lt;code&gt;&lt;span&gt;monitor starting...
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;home&#x2F;daysky&#x2F;test created
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;home&#x2F;daysky&#x2F;test deleted
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;home&#x2F;daysky&#x2F;test.txt created
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;home&#x2F;daysky&#x2F;test.txt deleted
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;参考：http:&#x2F;&#x2F;pyinotify.sourceforge.net&#x2F;&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;从我的百度空间导入&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
